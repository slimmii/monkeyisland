var supportedLanguages = ["it","en","es","pt","de","fi"];function initMainApp(sPath){  Tristesse.init();  Global.path_resources = sPath;	var userLang = ((navigator.language) ? navigator.language : navigator.userLanguage).substr(0,2);	//Pqp.trace(userLang)	if ((userLang != "it") && (userLang != "es") && (userLang != "pt")&& (userLang != "de")&& (userLang != "fi")){		userLang = "en";	}	Global.LNG = userLang;		var lnq = getParameterByName("lng");	if (!Pqp.isNull(lnq)){		var a = supportedLanguages;		for (var x=0;x<a.length;x++){			if (a[x] == lnq){				Global.LNG = lnq;				break;			}		}	}		setFlag();	  // Carica il file delle risorse  loadResources();}function setFlag(){	var a = new Array();	for (var x=0;x<supportedLanguages.length;x++){		if (supportedLanguages[x] != Global.LNG){			a.push(supportedLanguages[x]);		}	}	trace(a)	for (var y=0;y<a.length;y++){		trace(a[y])		jQuery("#lng"+y).attr("src","img/flag_"+a[y]+".jpg");		Pqp.addClick(jQuery("#lng"+y),onCambiaLingua,{lng:a[y]});	}}function onCambiaLingua(e){	var ln = e.bag.lng;	jQuery(location).attr('href',"index.html?lng="+ln);}function getParameterByName(name) {  var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);  return match && decodeURIComponent(match[1].replace(/\+/g, ' '));}function loadResources(){  $.ajax({    type: "GET",    url: Global.path_resources,    dataType: "xml",    success: resourcesLoadedOk,    error: resourcesLoadedKo  });  }function resourcesLoadedOk(xml){  Global.resources = $.xml2json(xml);  // Carica il file delle labels  loadLabels();}function resourcesLoadedKo(){  Tristesse.trace("Error loading "+Global.path_resources);}function loadLabels(){  $.ajax({    type: "GET",    url: Global.resources.path_labels,    dataType: "xml",    success: labelsLoadedOk,    error: labelsLoadedKo  });  }function labelsLoadedOk(xml){  // Inizializza le labels  Lng.init(xml)  initTagging();}function labelsLoadedKo(){  Tristesse.trace("Error loading labels!");}function initTagging(){	Tag.init(Global.resources);	loadElencoDemo();}function loadElencoDemo(){	jQuery("#altro").hide();  $.ajax({    type: "GET",    url: Global.resources.path_demo,    dataType: "xml",    success: demoLoadedOk,    error: demoLoadedKo  });  }function demoLoadedOk(xml){  // 	buildElencoDemo(xml);  appInited();}function demoLoadedKo(){  preappInited();}function preappInited(){  // inizializza il tagging	jQuery(".lblLoader").text(Lng.ln("inizializzazione"));  setTimeout(appInited,Const.TEMPO_MINIMO_PRELOADING);}function appInited(){    // Tagga l'evento  Tag.tag("hp");    // Nasconde il preloader  hidePreloaderapp();    // Mosta l'app  Global._app = $(".mainApp");  Global._app.show();    // Entry point  appReady(); // in MainApp.js}function buildElencoDemo(xml){	var toAppend = jQuery("#elencoDemo");	jQuery("#altro").show();  var o = $.xml2json(xml); 		jQuery(".demoElement").hide();	var ref = jQuery(".demoElement").clone();		var a = Pqp.geta(o.demos.demo)		for (var x=0;x<a.length;x++){		var oTmp = a[x];				if (oTmp.id != ID_DEMO){			var mc = ref.clone();			toAppend.append(mc)			mc.show();			jQuery("img",mc).attr("src",oTmp.img);			var s = ""+oTmp.text;			jQuery("label",mc).html(s.substr(0,s.length-1));		}	}	}